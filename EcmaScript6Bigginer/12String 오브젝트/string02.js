/**
 * ν”„λ΅κ·Έλ¨ μ„¤λ…λ¬Έμ„ μ£Όμ„
 * 2021.09 07 μμ—…
 *
 *           ===== fromCodePoint() =====
 *      -----------------------------------------------------------
 *
 *      - κµ¬λ¶„                    - λ°μ΄ν„°(κ°’)
 *
 *      - ν•νƒ                    - String.fromCodePoint()
 *      - νλΌλ―Έν„°                 - μ½”λ“ ν¬μΈνΈ, num1[,...[, numN]]
 *      - λ°ν™                     - μ½”λ“ ν¬μΈνΈμ— ν•΄λ‹Ήν•λ” λ¬Έμλ΅ λ³€ν™
 *
 *      -----------------------------------------------------------
 *
 *      - μ λ‹μ½”λ“μ μ½”λ“ ν¬μΈνΈμ— ν•΄λ‹Ήν•λ” λ¬Έμ λ°ν™
 *
 *      - νλΌλ―Έν„°μ— λ‹¤μμ μ½”λ“ ν¬μΈνΈ μ‘μ„± κ°€λ¥
 *      --> λ¬Έμλ¥Ό μ—°κ²°ν•μ—¬ λ°ν™
 *
 *      - ES5μ fromCharCode() μ‚¬μ©
 *      --> Surrogate pairλ΅ μ‘μ„±
 *
 */
console.log("=====================================");
"use strict"
// console.log μ‚¬μ©
const {log} = window.console;

{
    "use strict"
    log('------------ fromCodePoint() ---------------');
    const point = String.fromCodePoint;
    log(point(49, 50, 51));
    // :: 123
    log(point(44032, 44033));
    // :: κ°€κ°

    log(point(0x31, 0x32, 0x33));
    // :: 123
    log(point(0x1F418));
    // ::  π

    debugger;

    // 1. 49, 50, 51
    //    μ½”λ“ ν¬μΈνΈλ¥Ό 10μ§„μλ΅ μ‘μ„±ν• ν•νƒ

    // 2. 0x31, 0x32, 0x33 
    //    μ½”λ“ ν¬μΈνΈλ¥Ό 16μ§„μλ΅ μ‘μ„±ν• ν•νƒ
}
{
    "use strict"
    log('------------ ES5μ fromCharChode() ---------------');

    // fromCharCodeλ” μ΄μ™€κ°™μ΄ 5μλ¦¬λ΅ ν‘ν„ν•  μ μ—†λ‹¤.
    // μ•„λμ™€κ°™μ΄ κΉ¨μ Έμ„ λ‚μ¨λ‹¤
    // μ™λƒν•λ©΄ ES5λ” 5μλ¦¬λ¥Ό μ§€μ›ν•μ§€ μ•κΈ° λ•λ¬Έμ΄λ‹¤
    log(String.fromCharCode(0x1f418));
    // :: ο

    // μ΄λ•λ” μ΄μ™€κ°™μ΄ μ„λ΅κ²μ΄νΈ νμ–΄λ΅ μ‘μ„±ν•λ‹¤.
    log(String.fromCharCode(0xD83D, 0xDC18));
    // :: π
    debugger;

    // 1. fromCharCode()μ—μ„λ”
    //    Ox1f418 ν•νƒλ¥Ό μ§€μ›ν•μ§€ μ•μΌλ―€λ΅

    // 2. fromCharCode(0xD83D, 0xDC18)μ²λΌ
    //    Surrogate pairλ΅ μ‘μ„±ν•λ‹¤.

}

/**
 *           ===== codePointAt() =====
 *      -----------------------------------------------------------
 *      - κµ¬λ¶„                - λ°μ΄ν„°(κ°’)
 *
 *      - ν•νƒ                - String.prototype.codePointAt()
 *      - νλΌλ―Έν„°             - μ λ‹μ½”λ“λ΅ λ³€ν™ν•  λ¬Έμμ—΄μ μΈλ±μ¤
 *      - λ°ν™                - μ½”λ“ ν¬μΈνΈ κ°’
 *
 *      -----------------------------------------------------------
 *
 *      - λ€μƒ λ¬Έμμ—΄μ—μ„
 *      --> νλΌλ―Έν„°μ— μ‘μ„±ν• μΈλ±μ¤ λ²μ§Έ λ¬Έμλ¥Ό
 *      --> μ λ‹μ½”λ“ μ½”λ“ ν¬μΈνΈλ΅ λ³€ν™ν•μ—¬ λ°ν™
 *      --> μ½”λ“ ν¬μΈνΈλ” UTF-16μΌλ΅ μΈμ½”λ”©λ κ°’
 *
 */

{
    "use strict"
    log('------------ codePointAt() ---------------');

    // μ λ‹μ½”λ“μ μ½”λ“ν¬μΈνΈ κ°’μΌλ΅ λ³€ν™
    const result = "κ°€λ‚λ‹¤".codePointAt(2);
    log(result);
    // :: 45796

    // νƒ€μ…μ€ numberλ„¤
    log(typeof result);
    // :: number

    log("κ°€λ‚λ‹¤".codePointAt(3));
    // :: undefined

    // μ½”λ“ν¬μΈνΈλ¥Ό λ¬Έμλ΅ λ³€ν™
    log(String.fromCodePoint(result));
    // :: λ‹¤

    debugger;
}

/**
 *           ===== μ •λ¦¬μ‹κ°„ =====
 *
 *      - μ”κµ¬μ‚¬ν•­
 *      --> String.fromCodePoint(49, 50)κ³Ό
 *      --> "123".codePointAt(1)μ€ ν•νƒκ°€ λ‹¤λ¥΄λ‹¤.
 *      --> ν•νƒλ¥Ό λ‹¤λ¥΄κ² ν• κ²ƒμ€ λ¬΄μ—‡ λ•λ¬ΈμΌκΉ?
 *      -----> μ™ codePointAt()μ€ prototypeμ— λ„£μ–΄λ‘μ—μ„κΉ?
 *
 *      - JavaScript μ„¤κ³„ κ΄€μ μ—μ„
 *      --> μ •λ¦¬ν•΄ λ³΄μ•„μ•Ό ν•λ‹¤
 *
 *      ----> String.fromCodePoint(49,50)
 *      ------> μ§μ ‘ νΈμ¶ν•λ” ν•¨μ ν•νƒ
 *      ------> νλΌλ―Έν„°μ— λ‹¤μ μ‘μ„±
 *
 *      ----> "123".codePointAt(1)
 *      -------> String.prototype.codePointAt() νΈμ¶
 *      -------> prototypeμ„ μ‚¬μ©ν• λ©”μ†λ“ ν•νƒ
 *      -------> νλΌλ―Έν„°μ— μΈλ±μ¤ ν•λ‚λ§ μ‘μ„±
 *
 *      ----> [1, 2, 3]μΌλ΅ μ‘μ„±ν•λ©΄ μ–΄λ–»κ² λλ”κ°€?
 *      -------> codePointAt()μ€ κ°’μ„ κµ¬ν•λ” λ€μƒμ΄ μμ§€λ§
 *      ---------> fromCodePoint()λ” λ€μƒμ΄ μ—†μ
 *
 *      - λ‹¤μ–‘ν• μƒκ°μ μ ‘κ·Όμ„ μ„ν•΄
 *      --> κ°•μΆμ—μ„ μ •λ¦¬λ¥Ό μ κ³µν•μ§€ μ•λ”λ‹¤.
 */

/**
 *           ===== μ •λ¦¬ λ‹µλ³€ =====
 *
 *      1) String.fromCodePoint(49,50)κ³Ό "123".codePointAt(1)μ ν•νƒκ°€ λ‹¤λ¥Έ μ΄μ λ”
 *
 *       > FCP(fromCodePoint)λ” String μμ²΄κ°€ κ°€μ§€κ³ μλ” ν•¨μλ‹¤.
 *         λ°λ€λ΅, CPA(codePointAt)μ€ String.prototypeμ— μ—°κ²°λμ–΄ μλ” λ©”μ†λ“ ν•νƒμ΄λ‹¤.
 *
 *       > λ”°λΌμ„, FCPλ” StringμΌλ΅ νΈμ¶ν•΄μ•Όν•λ©°, CPAλ” μΈμ¤ν„΄μ¤μ—μ„ νΈμ¶ν•΄μ•Όν•λ‹¤.
 *       > κ·Έλ°λ° μ™, λ‘λ‹¤ μΈμ¤ν„΄μ¤μ— λ„£μ§€μ•κ³  μκΈ°μμ‹ μ΄ κ°€μ§€κ³ μλ” κ±ΈκΉ
 *
 *       > μƒκ°ν•΄λ³΄λ‹ FCPλ” νλΌλ―Έν„°λ΅ λ„κ²¨μ£Όλ” κ°’λ“¤μ΄ Number νƒ€μ…μ΄λ‹¤.
 *         κ·Έλ ‡λ‹¤λ©΄ Number.formCodePointλ¥Ό ν•λ ¤ν•μ§€λ§ μ• λ„¤λ“¤κ°’μ΄ μ—¬λ¬κ°,μ¦‰ λ°°μ—΄μ΄λ―€λ΅
 *         Array.formCodePointλ¥Ό ν•κ²λλ‹¤. κ·Έλ°λ° Arrayμ— fromCodePointκ°€ μ΅΄μ¬ν•κ² λλ©΄,
 *         μ½”λ“ν¬μΈνΈλ” Stringμ΄λ―€λ΅, λ©μ μ— λ§μ§€ μ•λ”λ‹¤.
 *
 *       2) κ·Έλ ‡λ‹¤κ³  κ·ΈλΌ FCPλ“¤μ•μ νƒ€μ…λ“¤μ„ Stringνƒ€μ…μΌλ΅ μ‘μ„±ν•κ²λλ©΄, "49,50,51" μ΄λ°ν•μ‹μΌλ΅
 *          μ‘μ„±ν•κ² λλ”λ°
 *
 *        > κ·Έλ ‡λ‹¤λ©΄ μλΌμ•Όν•λ” κΈ°μ¤€μ΄ μƒκΈ΄λ‹¤. ,μ„κΈ°μ¤€μΌλ΅ μλΌμ•Όν•λ”κ±΄μ§€ κΈ°μ¤€μ΄ μ• λ§¤λ¨νΈν•΄μ§ μ μλ‹¤?
 *
 *        3) [1 , 2 , 3] ν•νƒλ΅ μ‘μ„±ν•λ©΄ Array.prototype.codePointAt(1)μ΄ μ΅΄μ¬ν•μ§€ μ•κΈ°λ•λ¬Έμ— μ—λ¬κ°€ λ°μƒν•λ‹¤.
 */

{
    "use strict"
    log('------------ μ—λ¬ ν™•μΈ ---------------');
    try {
        [1, 2, 3].codePointAt(1);
    } catch (e) {
        log('codePointAt(1)μ€ String νƒ€μ…μ…λ‹λ‹¤.')
    }
    debugger;
}

/**
 *           ===== normalize() =====
 *      -----------------------------------------------------------
 *      - κµ¬λ¶„                - λ°μ΄ν„°(κ°’)
 *
 *      - ν•νƒ                - String.prototype.normalize()
 *      - νλΌλ―Έν„°             - μ •κ·ν™” ν•μ‹. λ””ν΄νΈ: NFC
 *      - λ°ν™                - λ³€ν™λ λ¬Έμμ—΄
 *
 *      -----------------------------------------------------------
 *
 *      - λ€μƒ λ¬Έμμ—΄μ„ νλΌλ―Έν„°μ— μ§€μ •ν•
 *      --> μ λ‹μ½”λ“ μ •κ·ν™” ν•μ‹μΌλ΅ λ³€ν™ν•μ—¬ λ°ν™
 *
 *      - μ λ‹μ½”λ“ μ •κ·ν™” ν•μ‹μ€ μ•„λκ°™μ΄ 4κ°€μ§€κ°€ μλ‹¤
 *      --> NFC, NFD, NFKC, NFKD
 *      --> http: //www.unicode.org/reports/tr15/
 *
 */

{
    "use strict"
    log('------------ μ½”λ“ ν¬μΈνΈ ---------------');
    
    // 16μ§„μλ΅ λ³€κ²½
    // (λ‡ μ§„μλ΅ ν• κ²ƒμΈμ§€)
    log("γ„±".codePointAt(0).toString(16));
    // :: 3131

    log("γ…".codePointAt(0).toString(16));
    // :: 314f

    log("\u{3131}\u{314F}");
    // :: γ„±γ…

    debugger

    // 1. γ„±κ³Ό γ…μ μ½”λ“ ν¬μΈνΈλ¥Ό 16μ§„μλ΅ κµ¬ν•λ‹¤.

    // 2. γ„±κ³Ό γ…μ μ½”λ“ ν¬μΈνΈλ¥Ό μ—°κ²°ν•μ—¬ μ‘μ„±
    // 3. "κ°€"λ΅ ν‘μ‹λμ§€λ§ μ–΄μƒ‰ν•λ‹¤.
}

{
    "use strict"
    log('------------ normalize() ---------------');
    const point = "\u{3131}\u{314F}";
    log(point.normalize("NFC"));
    // :: γ„±γ…
    log(point.normalize("NFD"));
    // :: γ„±γ…

    log(point.normalize("NFKD"));
    // :: α„€α…΅
    log(point.normalize("NFKC"));
    // :: α„€α…΅

    debugger;

    // 1. NFCμ™€ NFDλ” λ‹¨μ§€ μ—°κ²°ν•μ—¬ μ–΄μƒ‰ν•μ§€λ§
    // 2. NFKDμ™€ NFKCλ” λ¨μ•„ μ“΄ ν•νƒλ΅ ν‘μ‹λλ‹¤.

    /**
     *  - κ·Έλ ‡κΈ° λ•λ¬Έμ— normalizeλ” NFKDλ‚ NFKCλ΅ ν•λ”κ²ƒμ΄ λ§λ‹¤.
     *    λ‘κ°μ μ λ‹μ½”λ“λ¥Ό μ—°κ²°ν•μ—¬ λ¬Έμλ¥Ό ν‘μ‹ν• λ•, μ„μ™€κ°™μ΄ normalizeλ¥Ό ν•λ” κ²ƒμ΄λ‹¤.
     */
}